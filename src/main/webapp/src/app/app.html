<header class="header">
  <div class="logo">
    <a routerLink="/" class="logo-link">
      <h1>Position Manager</h1>
    </a>
  </div>
  <nav class="nav">
    @if (securityStore.isLoading()) {
      <span>Laden...</span>
    } @else if (securityStore.user()) {
      @if (securityStore.hasAnyRole()) {
        <a routerLink="/positions" routerLinkActive="active" class="nav-link">Stellen</a>
        @if (securityStore.isJobManager() || securityStore.isAdmin()) {
          <a routerLink="/position-finder" routerLinkActive="active" class="nav-link"
            >Stellensuche</a
          >
        }
        @if (securityStore.isAdmin()) {
          <a routerLink="/admin/users" routerLinkActive="active" class="nav-link">Benutzer</a>
          <a routerLink="/admin/research-groups" routerLinkActive="active" class="nav-link"
            >Forschungsgruppen</a
          >
          <a routerLink="/admin/grade-values" routerLinkActive="active" class="nav-link"
            >Stellenwertigkeiten</a
          >
        }
      }
      <span class="user-info">
        {{ securityStore.user()?.firstName }} {{ securityStore.user()?.lastName }}
      </span>
      <button class="btn btn-outline" (click)="securityStore.signOut()">Abmelden</button>
    } @else {
      <button class="btn btn-primary" (click)="securityStore.signIn()">Anmelden</button>
    }
  </nav>
</header>

<main class="main">
  @if (securityStore.user() && !securityStore.hasAnyRole()) {
    <app-access-denied />
  } @else {
    <router-outlet />
  }
</main>

<footer class="footer">
  <a routerLink="/impressum">Impressum</a>
  @if (releaseLabel()) {
    <span class="separator">|</span>
    <a [href]="releasePageUrl" target="_blank" rel="noopener noreferrer">{{ releaseLabel() }}</a>
  }
  <span class="separator">|</span>
  <a routerLink="/datenschutz">Datenschutz</a>
</footer>
